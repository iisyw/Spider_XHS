# 开发日志

## 2025/06/05

1. 增加更详细的数据信息raw_info.json以便观察数据，增加获取图集中的live_video
2. 增加新功能，优化下载
   - 优化live_video后面的序号，不再按顺序，而是与图片序号对应
   - 增加防重复下载机制，增加了与excel_datas同级的csv_datas目录，用于记录笔记下载的状态，下载前会检查文件的完整性，防止重复下载

## 2025/06/06

1. 优化代码，修改csv记录逻辑，增加图集视频类型，修改csv增加描述字段，增加PushDeer消息推送功能
2. 修改定义爬取用户URL列表的方式，增加监听循环爬取功能，完善PushDeer通知
3. 将推送消息密钥改为放到.env中配置
4. 增加动态重载配置，每轮监控会重新读取Cookies，每次发消息会重新读取密钥，使得程序在运行时可以直接更换.env中的Cookies和密钥，无需重启程序
5. 修改user_urls的配置也放到.env中，每轮爬取都会重新读取，方便更换或添加
6. 优化代码
7. 更新README
8. 完善docker的使用
9. 更新README
10. 修改Dockerfile，增加代理配置
11. 修改Dockerfile默认不使用代理

## 2025/06/07

1. 增加运行模式配置，可选运行一次或持续监听模式
2. 优化文件检查逻辑，减少api的请求；调整csv的记录，描述如果有换行改为空格，增加笔记图片数量和视频数量
3. 优化下载部分，优化日志输出内容
4. 去除冗余代码
5. 修复csv记录状态不会更新的bug，修复csv字段不会追加的bug
6. 修改每轮的等待间隔，用户爬取间隔，日志级别配置放到.env配置文件，并支持动态重载
7. 更新README
